(this.webpackJsonptalkie=this.webpackJsonptalkie||[]).push([[0],{28:function(e,t,a){e.exports=a(43)},33:function(e,t,a){},34:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n,c=a(0),o=a.n(c),r=a(22),s=a.n(r),i=(a(33),a(6)),l=(a(34),a(27)),u=a(26),m=a(15),d=(a(35),a(44),"messages");function p(e){var t=Object(c.useState)([]),a=Object(i.a)(t,2),o=a[0],r=a[1];return Object(c.useEffect)((function(){n.collection(d).onSnapshot((function(e){return e.docChanges().forEach((function(e){var t,a,n=e.doc,c=e.type;"added"===c&&(t=Object(l.a)({},n.data(),{id:n.id}),r((function(e){var a=[t].concat(Object(u.a)(e));return a.sort((function(e,t){return t.ts.seconds-e.ts.seconds})),a}))),"removed"===c&&(a=n.id,r((function(e){return e.filter((function(e){return e.id!==a}))})))}))}))}),[]),o}var f={send:function(e){return n.collection(d).add(e)},delete:function(e){return n.collection(d).doc(e).delete()}};m.initializeApp({apiKey:"AIzaSyDSgYz1ChHLO6weyxK1oShAu2WYydm9hZs",authDomain:"chatapp2020-a4a27.firebaseapp.com",databaseURL:"https://chatapp2020-a4a27.firebaseio.com",projectId:"chatapp2020-a4a27",storageBucket:"chatapp2020-a4a27.appspot.com",messagingSenderId:"589577009354",appId:"1:589577009354:web:753b36f63b74463a0a1c33",measurementId:"G-G527XLD67M"}),n=m.firestore();var h=a(18);var v=function(e){var t=Object(c.useState)(""),a=Object(i.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(!1),l=Object(i.a)(s,2),u=l[0],m=l[1],d=Object(c.useRef)(null);return o.a.createElement("div",{className:"edit-username"},o.a.createElement("input",{value:n,ref:d,className:"name-input",style:{display:u?"none":"flex"},onChange:function(e){return r(e.target.value)},onKeyPress:function(t){"Enter"===t.key&&e.onSave(n)}}),u&&o.a.createElement("div",null,n),o.a.createElement("button",{onClick:function(){d.current.focus(),n&&e.onSave(n),m(!u)},className:"name-button"},u?o.a.createElement(h.a,null):o.a.createElement(h.b,null)))},g=a(23),E=a(7);function b(e){var t=e.match.params.room,a=Object(c.useState)(""),n=Object(i.a)(a,2),r=n[0],s=n[1],l=p();return o.a.createElement("main",null,o.a.createElement("header",null,o.a.createElement("div",{className:"logo-wrap"},o.a.createElement("img",{className:"logo",alt:"logo",src:"https://www.pngarts.com/files/1/Message-PNG-Image-with-Transparent-Background.png"}),"Talkie"),o.a.createElement(v,{onSave:s})),o.a.createElement("div",{className:"messages"},l.map((function(e,t){return o.a.createElement("div",{key:t,className:"message-wrap",from:e.name===r?"me":"you"},o.a.createElement("div",{className:"message"},o.a.createElement("div",{className:"msg-name"},e.name),o.a.createElement("div",{className:"msg-text"},e.text)))}))),o.a.createElement(w,{onSend:function(e){f.send({text:e,name:r,ts:new Date,room:t})}}))}function w(e){var t=Object(c.useState)(""),a=Object(i.a)(t,2),n=a[0],r=a[1];return o.a.createElement("div",{className:"text-input-wrap"},o.a.createElement("input",{value:n,className:"text-input",placeholder:"write your message",onChange:function(e){return r(e.target.value)},onKeyPress:function(t){"Enter"===t.key&&(n&&e.onSend(n),r(""))}}),o.a.createElement("button",{onClick:function(){n&&e.onSend(n),r("")},className:"button",disabled:!n},"SEND"))}var S=function(){return Object(c.useEffect)((function(){window.location.pathname.length<2&&(window.location.pathname="home")}),[]),o.a.createElement(g.a,null,o.a.createElement(E.a,{path:"/:room",component:b}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[28,1,2]]]);
//# sourceMappingURL=main.8d569fb9.chunk.js.map