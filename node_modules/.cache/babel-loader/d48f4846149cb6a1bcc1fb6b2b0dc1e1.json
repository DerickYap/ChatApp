{"ast":null,"code":"// import {useState, useEffect} from 'react'\n// import * as firebase from \"firebase/app\"\n// import \"firebase/firestore\"\n// import \"firebase/storage\"\n// let store\n// const coll = 'messages'\n// function useDB(room) {\n//     const [messages, setMessages] = useState([])\n//     function add(m) {\n//         setMessages(current => {\n//             const msgs = [m, ...current]\n//             msgs.sort((a,b)=> b.ts.seconds - a.ts.seconds)\n//             return msgs\n//         })\n//     }\n//     function remove(id) {\n//         setMessages(current=> current.filter(m=> m.id!==id))\n//     }\n//     useEffect(() => {\n//         store.collection(coll)\n//         // .where('room','==',room)\n//         .onSnapshot(snap=> snap.docChanges().forEach(c=> {\n//             const {doc, type} = c\n//             if (type==='added') add({...doc.data(),id:doc.id})\n//             if (type==='removed') remove(doc.id)\n//         }))\n//     }, [])\n//     return messages\n// }\n// const db = {}\n// db.send = function(msg) {\n//     return store.collection(coll).add(msg)\n// }\n// db.delete = function(id) {\n//     return store.collection(coll).doc(id).delete()\n// }\n// export { db, useDB }\n// const firebaseConfig = {\n//     apiKey: \"AIzaSyDSgYz1ChHLO6weyxK1oShAu2WYydm9hZs\",\n//     authDomain: \"chatapp2020-a4a27.firebaseapp.com\",\n//     databaseURL: \"https://chatapp2020-a4a27.firebaseio.com\",\n//     projectId: \"chatapp2020-a4a27\",\n//     storageBucket: \"chatapp2020-a4a27.appspot.com\",\n//     messagingSenderId: \"589577009354\",\n//     appId: \"1:589577009354:web:753b36f63b74463a0a1c33\",\n//     measurementId: \"G-G527XLD67M\"\n//   };\n// firebase.initializeApp(firebaseConfig)\n// store = firebase.firestore()","map":{"version":3,"sources":["/Users/d3rickjy/Desktop/ChatApp/src/db.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA","sourcesContent":["// import {useState, useEffect} from 'react'\n// import * as firebase from \"firebase/app\"\n// import \"firebase/firestore\"\n// import \"firebase/storage\"\n\n// let store\n// const coll = 'messages'\n\n// function useDB(room) {\n//     const [messages, setMessages] = useState([])\n//     function add(m) {\n//         setMessages(current => {\n//             const msgs = [m, ...current]\n//             msgs.sort((a,b)=> b.ts.seconds - a.ts.seconds)\n//             return msgs\n//         })\n//     }\n//     function remove(id) {\n//         setMessages(current=> current.filter(m=> m.id!==id))\n//     }\n//     useEffect(() => {\n//         store.collection(coll)\n//         // .where('room','==',room)\n//         .onSnapshot(snap=> snap.docChanges().forEach(c=> {\n//             const {doc, type} = c\n//             if (type==='added') add({...doc.data(),id:doc.id})\n//             if (type==='removed') remove(doc.id)\n//         }))\n//     }, [])\n//     return messages\n// }\n\n// const db = {}\n// db.send = function(msg) {\n//     return store.collection(coll).add(msg)\n// }\n// db.delete = function(id) {\n//     return store.collection(coll).doc(id).delete()\n// }\n\n// export { db, useDB }\n\n// const firebaseConfig = {\n//     apiKey: \"AIzaSyDSgYz1ChHLO6weyxK1oShAu2WYydm9hZs\",\n//     authDomain: \"chatapp2020-a4a27.firebaseapp.com\",\n//     databaseURL: \"https://chatapp2020-a4a27.firebaseio.com\",\n//     projectId: \"chatapp2020-a4a27\",\n//     storageBucket: \"chatapp2020-a4a27.appspot.com\",\n//     messagingSenderId: \"589577009354\",\n//     appId: \"1:589577009354:web:753b36f63b74463a0a1c33\",\n//     measurementId: \"G-G527XLD67M\"\n//   };\n\n// firebase.initializeApp(firebaseConfig)\n// store = firebase.firestore()"]},"metadata":{},"sourceType":"module"}